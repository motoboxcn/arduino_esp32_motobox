每次需求做完之后，你需要保证项目能正常编译，`pio run --environment esp32-air780eg` ；
文档都放到`docs`目录下。
测试脚本都放在`test`目录下，零时的及时清理；
不要保留多个版本，修改直接在原文件修改；

## 开发记录

### 2025-07-25 LED充电状态显示功能 🔋
- **功能实现**: 根据充电状态自动切换LED显示效果
  - 充电中：绿灯呼吸效果（20%亮度）
  - 未充电：绿色常亮（2%亮度）
  - 低电量：红灯快闪警告（≤10%电量）
- **智能模式**: 支持自动/手动模式切换
  - 默认自动模式根据充电状态显示
  - 手动控制时暂时禁用自动模式
  - 系统自动恢复充电状态显示
- **低功耗优化**: 未充电时仅2%亮度，最小化功耗
- **技术文档**: 创建详细的功能说明 `docs/led_charging_status.md`
- **测试工具**: 开发自动化测试脚本 `test/test_led_charging.py`

### 2025-07-23 SD卡低功耗优化 🎯
- **问题发现**: 通过硬件对比测试发现SD卡导致20mA休眠功耗
- **技术方案**: 实现完整的SD卡低功耗管理系统
  - 添加 `disableSDCard()` 和 `enableSDCard()` 函数
  - 休眠前自动卸载文件系统、关闭SPI总线
  - 配置SD卡GPIO为低功耗模式，禁用上下拉电阻
  - 集成到现有电源管理流程中
- **优化效果**: 功耗从20mA降低到1.4mA，**降低93%**
- **续航提升**: 3000mAh电池续航从6天提升到89天，**提升14倍**
- **技术文档**: 创建详细的技术报告 `docs/power_optimization_sd_card.md`

### 2025-07-23 低功耗优化
- 优化了 PowerManager 的外设关闭逻辑
- 添加了 Air780EG 模块的电源管理（关键优化点）
- 完善了 WiFi/蓝牙的完全关闭流程
- 添加了 GPIO 低功耗配置，禁用不必要的上拉
- 创建了 PowerDiagnostics 诊断工具
- 优化了电源域配置，关闭不必要的电源域
- 预期将休眠功耗从 30mA 降低到 5mA 以下

### 2025-07-23 快捷按钮功能
- 为 WiFi 配置页面添加了快捷按钮功能
- 实现了回车发送和撤销功能的小图标按钮
- 支持键盘快捷键：Ctrl+Enter 提交，Esc 清空
- 按钮采用圆形设计，带悬停效果和工具提示
- 创建了测试页面验证功能正常